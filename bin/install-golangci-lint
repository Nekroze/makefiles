#!/usr/bin/env bash
set -euo pipefail

export GOBIN="$1"
mkdir -p "$GOBIN"
cd "$GOBIN"

# Create a go mod just for this binary, to avoid messing with the project's
# own go.mod. We ignore
if [ ! -f go.mod ]; then
    go mod init bin
fi

# Install the latest version of the linter into this "bin" module.
go get "github.com/golangci/golangci-lint/cmd/golangci-lint@latest"

# Touch the go.mod file so that it is no longer considered out of date by make,
# even if nothing actually changed.
touch go.mod
